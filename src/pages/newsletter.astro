---
import { getCollection } from 'astro:content';
import dayjs from 'dayjs';
import BaseLayout from '../components/layouts/BaseLayout.astro';

import NewsletterGrid from '../components/NewsletterGrid.tsx';

const collection = await getCollection('newsletter', ({ data }) => !data.draft);
const newsletters = collection.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const newsletterItems = newsletters.map((item) => ({
  id: item.id,
  data: item.data,
}));

const title = '明日周刊';
const description = '分享包括但不限于技术阅读、生活思考、工具推荐等内容。';
---

<BaseLayout title={title} description={description}>
  <div class="max-w-7xl mx-auto px-4 py-12">
    <NewsletterGrid client:load items={newsletterItems} />
  </div>
</BaseLayout>
